# æµ‹è¯•ç›¸å…³æ’ä»¶å’Œä¾èµ–ç‰ˆæœ¬åˆ†æ

## å½“å‰é…ç½®æ¦‚è§ˆ

### 1. æµ‹è¯•æ¡†æ¶ä¾èµ–

#### JUnit
- **JUnit 4**: `junit:junit:4.12` (æ˜¾å¼å£°æ˜ï¼Œç¬¬255-258è¡Œ)
- **JUnit 5**: é€šè¿‡ `spring-boot-starter-test` å¼•å…¥ï¼ˆSpring Boot 2.4.1é»˜è®¤ä½¿ç”¨JUnit 5.7.0ï¼‰
- **é—®é¢˜**: JUnit 4 å’Œ JUnit 5 åŒæ—¶å­˜åœ¨ï¼Œä½†å·²æ’é™¤ `junit-vintage-engine`ï¼ˆç¬¬59-61è¡Œï¼‰

#### Spring Boot Test
- **spring-boot-starter-test**: é€šè¿‡çˆ¶POMç®¡ç†ï¼ˆSpring Boot 2.4.1ï¼‰
  - åŒ…å« JUnit 5.7.0
  - åŒ…å« Mockito 3.6.28
  - åŒ…å« AssertJ 3.18.1
  - å·²æ’é™¤ `junit-vintage-engine`ï¼ˆæ­£ç¡®é…ç½®ï¼‰

#### å…¶ä»–æµ‹è¯•ä¾èµ–
- **spring-security-test**: é€šè¿‡çˆ¶POMç®¡ç†
- **happy-dns-java**: 0.1.6ï¼ˆæµ‹è¯•èŒƒå›´ï¼‰

### 2. æµ‹è¯•æ’ä»¶

#### Maven Surefire Plugin
- **ç‰ˆæœ¬**: `3.0.0`ï¼ˆç¬¬319è¡Œï¼‰
- **é…ç½®**: 
  - `forkCount=1`
  - `reuseForks=true`
  - ä½¿ç”¨ `${jacoco.argLine}` é›†æˆJaCoCo

#### JaCoCo Maven Plugin
- **ç‰ˆæœ¬**: `0.8.7`ï¼ˆç¬¬337è¡Œï¼‰
- **é…ç½®**:
  - ä½¿ç”¨è‡ªå®šä¹‰å±æ€§å `jacoco.argLine`
  - æ’é™¤å®ä½“ç±»ã€DTOã€VOç­‰

## æ½œåœ¨å†²çªåˆ†æ

### âœ… å·²è§£å†³çš„å†²çª

1. **JUnit 4 vs JUnit 5**
   - âœ… å·²æ’é™¤ `junit-vintage-engine`ï¼Œé¿å…JUnit 4å’Œ5å†²çª
   - âš ï¸ ä½†ä»æ˜¾å¼å£°æ˜äº† `junit:junit:4.12`ï¼Œè™½ç„¶ä¸ä¼šå†²çªï¼Œä½†å¯èƒ½ä¸éœ€è¦

2. **Surefireä¸JaCoCoé›†æˆ**
   - âœ… ä½¿ç”¨è‡ªå®šä¹‰å±æ€§å `jacoco.argLine` é¿å…å†²çª
   - âœ… é…ç½®æ­£ç¡®

### âš ï¸ éœ€è¦æ³¨æ„çš„é—®é¢˜

1. **é‡å¤çš„JUnit 4ä¾èµ–**
   - ç¬¬64-68è¡Œå’Œç¬¬254-258è¡Œéƒ½å£°æ˜äº† `junit:junit`
   - è™½ç„¶ç‰ˆæœ¬ç›¸åŒï¼ˆ4.12ï¼‰ï¼Œä½†é‡å¤å£°æ˜ä¸å¿…è¦

2. **é‡å¤çš„spring-boot-starter-test**
   - ç¬¬54-63è¡Œå’Œç¬¬260-264è¡Œéƒ½å£°æ˜äº† `spring-boot-starter-test`
   - è™½ç„¶ä¸ä¼šå†²çªï¼Œä½†é‡å¤å£°æ˜ä¸å¿…è¦

3. **ç‰ˆæœ¬å…¼å®¹æ€§**
   - Spring Boot 2.4.1 é»˜è®¤ä½¿ç”¨ï¼š
     - JUnit 5.7.0
     - Mockito 3.6.28
     - Surefire 2.22.2ï¼ˆä½†å·²è¦†ç›–ä¸º3.0.0ï¼‰
   - å½“å‰é…ç½®ï¼š
     - Surefire 3.0.0 âœ… å…¼å®¹
     - JaCoCo 0.8.7 âœ… å…¼å®¹

## ç‰ˆæœ¬å…¼å®¹æ€§çŸ©é˜µ

| ç»„ä»¶ | Spring Boot 2.4.1 é»˜è®¤ | å½“å‰é…ç½® | å…¼å®¹æ€§ |
|------|------------------------|----------|--------|
| JUnit | 5.7.0 | 5.7.0 (é€šè¿‡starter) + 4.12 (æ˜¾å¼) | âœ… å…¼å®¹ |
| Mockito | 3.6.28 | 3.6.28 (é€šè¿‡starter) | âœ… å…¼å®¹ |
| Surefire | 2.22.2 | 3.0.0 | âœ… å…¼å®¹ |
| JaCoCo | - | 0.8.7 | âœ… å…¼å®¹ |
| Java | 8+ | 8 | âœ… å…¼å®¹ |

## å»ºè®®ä¼˜åŒ–

### 1. ç§»é™¤é‡å¤ä¾èµ–

```xml
<!-- ç§»é™¤ç¬¬64-68è¡Œçš„junitä¾èµ–ï¼ˆå·²åœ¨ç¬¬254-258è¡Œå£°æ˜ï¼‰ -->
<!-- ç§»é™¤ç¬¬260-264è¡Œçš„spring-boot-starter-testï¼ˆå·²åœ¨ç¬¬54-63è¡Œå£°æ˜ï¼‰ -->
```

### 2. è€ƒè™‘ç§»é™¤JUnit 4

å¦‚æœé¡¹ç›®å®Œå…¨ä½¿ç”¨JUnit 5ï¼Œå¯ä»¥è€ƒè™‘ç§»é™¤JUnit 4ä¾èµ–ï¼š

```xml
<!-- ç§»é™¤æˆ–æ³¨é‡Šæ‰ -->
<!--
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.12</version>
    <scope>test</scope>
</dependency>
-->
```

### 3. ç»Ÿä¸€ä¾èµ–å£°æ˜

å°†æ‰€æœ‰æµ‹è¯•ç›¸å…³ä¾èµ–é›†ä¸­åœ¨ä¸€ä¸ªä½ç½®ï¼Œé¿å…é‡å¤ã€‚

## éªŒè¯å‘½ä»¤

```bash
# æŸ¥çœ‹æµ‹è¯•ä¾èµ–æ ‘
mvn dependency:tree -Dscope=test

# æŸ¥çœ‹æœ‰æ•ˆPOMï¼ˆåŒ…å«æ‰€æœ‰è§£æåçš„ç‰ˆæœ¬ï¼‰
mvn help:effective-pom > effective-pom.xml

# æ£€æŸ¥ä¾èµ–å†²çª
mvn dependency:analyze

# è¿è¡Œæµ‹è¯•éªŒè¯
mvn clean test
```

## æ€»ç»“

### âœ… å½“å‰çŠ¶æ€
- æ‰€æœ‰æµ‹è¯•ç›¸å…³æ’ä»¶å’Œä¾èµ–ç‰ˆæœ¬å…¼å®¹
- æ²¡æœ‰ä¸¥é‡çš„ç‰ˆæœ¬å†²çª
- JaCoCoå’ŒSurefireé›†æˆæ­£ç¡®

### âš ï¸ ä¼˜åŒ–å»ºè®®
- ç§»é™¤é‡å¤çš„ä¾èµ–å£°æ˜
- è€ƒè™‘æ˜¯å¦è¿˜éœ€è¦JUnit 4
- æ¸…ç†ä¸å¿…è¦çš„ä¾èµ–

### ğŸ“Š å…¼å®¹æ€§è¯„åˆ†
- **æ•´ä½“å…¼å®¹æ€§**: âœ… ä¼˜ç§€
- **é…ç½®æ­£ç¡®æ€§**: âœ… æ­£ç¡®
- **ä»£ç æ•´æ´åº¦**: âš ï¸ æœ‰é‡å¤ä¾èµ–

