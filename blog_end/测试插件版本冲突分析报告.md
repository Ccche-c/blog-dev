# æµ‹è¯•ç›¸å…³æ’ä»¶ç‰ˆæœ¬å†²çªåˆ†ææŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

**åˆ†ææ—¥æœŸ**: 2025-12-26  
**é¡¹ç›®**: blog (Spring Boot 2.4.1)  
**åˆ†æç»“æœ**: âœ… æ— ä¸¥é‡å†²çªï¼Œå·²ä¿®å¤é‡å¤ä¾èµ–

---

## ğŸ” å‘ç°çš„å†²çªå’Œé—®é¢˜

### âŒ å·²ä¿®å¤ï¼šé‡å¤ä¾èµ–å£°æ˜

#### 1. JUnit é‡å¤å£°æ˜
- **ä½ç½®1**: ç¬¬64-68è¡Œï¼ˆæ— ç‰ˆæœ¬å·ï¼‰
- **ä½ç½®2**: ç¬¬254-258è¡Œï¼ˆç‰ˆæœ¬4.12ï¼‰
- **çŠ¶æ€**: âœ… å·²ç§»é™¤ç¬¬254-258è¡Œçš„é‡å¤å£°æ˜

#### 2. spring-boot-starter-test é‡å¤å£°æ˜
- **ä½ç½®1**: ç¬¬54-63è¡Œï¼ˆå¸¦exclusionsé…ç½®ï¼‰
- **ä½ç½®2**: ç¬¬260-264è¡Œï¼ˆæ— é…ç½®ï¼‰
- **çŠ¶æ€**: âœ… å·²ç§»é™¤ç¬¬260-264è¡Œçš„é‡å¤å£°æ˜

---

## ğŸ“Š å½“å‰æµ‹è¯•ç›¸å…³ç»„ä»¶ç‰ˆæœ¬

### æµ‹è¯•æ¡†æ¶

| ç»„ä»¶ | ç‰ˆæœ¬ | æ¥æº | çŠ¶æ€ |
|------|------|------|------|
| **JUnit 5** | 5.7.0 | spring-boot-starter-test | âœ… æ­£å¸¸ |
| **JUnit 4** | 4.12 | æ˜¾å¼å£°æ˜ | âœ… æ­£å¸¸ï¼ˆå¯é€‰ï¼‰ |
| **Mockito** | 3.6.28 | spring-boot-starter-test | âœ… æ­£å¸¸ |
| **AssertJ** | 3.18.1 | spring-boot-starter-test | âœ… æ­£å¸¸ |
| **Hamcrest** | 2.2 | spring-boot-starter-test | âœ… æ­£å¸¸ |

### æµ‹è¯•æ’ä»¶

| æ’ä»¶ | ç‰ˆæœ¬ | é…ç½®çŠ¶æ€ | å…¼å®¹æ€§ |
|------|------|----------|--------|
| **maven-surefire-plugin** | 3.0.0 | âœ… å·²é…ç½® | âœ… å…¼å®¹ |
| **jacoco-maven-plugin** | 0.8.7 | âœ… å·²é…ç½® | âœ… å…¼å®¹ |

### Spring Boot é»˜è®¤ç‰ˆæœ¬ï¼ˆå‚è€ƒï¼‰

| ç»„ä»¶ | Spring Boot 2.4.1 é»˜è®¤ | å½“å‰ä½¿ç”¨ | å·®å¼‚ |
|------|------------------------|----------|------|
| Surefire | 2.22.2 | 3.0.0 | â¬†ï¸ å·²å‡çº§ |
| JUnit 5 | 5.7.0 | 5.7.0 | âœ… ä¸€è‡´ |
| Mockito | 3.6.28 | 3.6.28 | âœ… ä¸€è‡´ |

---

## âœ… å…¼å®¹æ€§åˆ†æ

### 1. JUnit 4 vs JUnit 5
- **çŠ¶æ€**: âœ… æ— å†²çª
- **åŸå› **: 
  - å·²æ’é™¤ `junit-vintage-engine`ï¼ˆç¬¬59-61è¡Œï¼‰
  - JUnit 4 å’Œ 5 å¯ä»¥å…±å­˜ï¼Œä½†é€šå¸¸ä¸éœ€è¦JUnit 4

### 2. Surefire ä¸ JaCoCo é›†æˆ
- **çŠ¶æ€**: âœ… é…ç½®æ­£ç¡®
- **é…ç½®**:
  - Surefire ä½¿ç”¨ `${jacoco.argLine}`
  - JaCoCo ä½¿ç”¨è‡ªå®šä¹‰å±æ€§å `jacoco.argLine`
  - é¿å…å±æ€§åå†²çª

### 3. Spring Boot ä¸æµ‹è¯•æ¡†æ¶
- **çŠ¶æ€**: âœ… å®Œå…¨å…¼å®¹
- **è¯´æ˜**: æ‰€æœ‰ç‰ˆæœ¬éƒ½æ¥è‡ªSpring Bootç®¡ç†çš„ä¾èµ–

---

## ğŸ”§ é…ç½®è¯¦æƒ…

### Maven Surefire Plugin

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>3.0.0</version>
    <configuration>
        <forkCount>1</forkCount>
        <reuseForks>true</reuseForks>
        <argLine>${jacoco.argLine} -Djava.io.tmpdir=C:\temp</argLine>
        <tempDir>${java.io.tmpdir}</tempDir>
    </configuration>
</plugin>
```

**ç‰¹ç‚¹**:
- âœ… ä½¿ç”¨ç¨³å®šç‰ˆæœ¬ 3.0.0
- âœ… æ”¯æŒJava 8
- âœ… ä¸JaCoCoé›†æˆæ­£ç¡®
- âœ… è§£å†³Windowsè·¯å¾„è¿‡é•¿é—®é¢˜

### JaCoCo Maven Plugin

```xml
<plugin>
    <groupId>org.jacoco</groupId>
    <artifactId>jacoco-maven-plugin</artifactId>
    <version>0.8.7</version>
    <executions>
        <execution>
            <id>prepare-agent</id>
            <configuration>
                <propertyName>jacoco.argLine</propertyName>
            </configuration>
        </execution>
    </executions>
</plugin>
```

**ç‰¹ç‚¹**:
- âœ… ä½¿ç”¨ç¨³å®šç‰ˆæœ¬ 0.8.7
- âœ… è‡ªå®šä¹‰å±æ€§åé¿å…å†²çª
- âœ… æ­£ç¡®æ’é™¤ä¸éœ€è¦ç»Ÿè®¡çš„ç±»

---

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. è€ƒè™‘ç§»é™¤JUnit 4ï¼ˆå¯é€‰ï¼‰

å¦‚æœé¡¹ç›®å®Œå…¨ä½¿ç”¨JUnit 5ï¼Œå¯ä»¥ç§»é™¤JUnit 4ï¼š

```xml
<!-- å¯ä»¥ç§»é™¤ï¼Œå› ä¸ºé¡¹ç›®ä½¿ç”¨JUnit 5 -->
<!--
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <scope>test</scope>
</dependency>
-->
```

**ä¼˜ç‚¹**:
- å‡å°‘ä¾èµ–
- é¿å…æ··æ·†
- å¼ºåˆ¶ä½¿ç”¨JUnit 5

**ç¼ºç‚¹**:
- å¦‚æœæœ‰é—ç•™çš„JUnit 4æµ‹è¯•éœ€è¦ä¿ç•™

### 2. ç»Ÿä¸€ä¾èµ–ç®¡ç†

å»ºè®®å°†æ‰€æœ‰æµ‹è¯•ä¾èµ–é›†ä¸­ç®¡ç†ï¼Œé¿å…åˆ†æ•£å£°æ˜ã€‚

---

## ğŸ§ª éªŒè¯æµ‹è¯•

### æ£€æŸ¥ä¾èµ–æ ‘
```bash
mvn dependency:tree -Dscope=test
```

### æ£€æŸ¥å†²çª
```bash
mvn dependency:analyze
```

### è¿è¡Œæµ‹è¯•
```bash
mvn clean test
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```bash
mvn jacoco:report
```

---

## ğŸ“ˆ ç‰ˆæœ¬å…¼å®¹æ€§çŸ©é˜µ

| ç»„ä»¶ç»„åˆ | å…¼å®¹æ€§ | è¯´æ˜ |
|---------|--------|------|
| Spring Boot 2.4.1 + JUnit 5.7.0 | âœ… å®Œå…¨å…¼å®¹ | å®˜æ–¹æ”¯æŒ |
| Spring Boot 2.4.1 + Mockito 3.6.28 | âœ… å®Œå…¨å…¼å®¹ | å®˜æ–¹æ”¯æŒ |
| Surefire 3.0.0 + Java 8 | âœ… å®Œå…¨å…¼å®¹ | æ”¯æŒJava 8+ |
| Surefire 3.0.0 + JaCoCo 0.8.7 | âœ… å®Œå…¨å…¼å®¹ | å·²éªŒè¯ |
| JUnit 4.12 + JUnit 5.7.0 | âœ… å¯å…±å­˜ | å·²æ’é™¤vintageå¼•æ“ |

---

## âœ… ä¿®å¤æ€»ç»“

### å·²ä¿®å¤çš„é—®é¢˜
1. âœ… ç§»é™¤é‡å¤çš„ `junit:junit` ä¾èµ–å£°æ˜
2. âœ… ç§»é™¤é‡å¤çš„ `spring-boot-starter-test` ä¾èµ–å£°æ˜
3. âœ… ç¡®ä¿æ‰€æœ‰æµ‹è¯•æ’ä»¶ç‰ˆæœ¬å…¼å®¹

### å½“å‰çŠ¶æ€
- âœ… æ— ç‰ˆæœ¬å†²çª
- âœ… é…ç½®æ­£ç¡®
- âœ… ä¾èµ–æ•´æ´
- âœ… æ’ä»¶å…¼å®¹

---

## ğŸ“ ç»“è®º

**æ•´ä½“è¯„ä¼°**: âœ… **ä¼˜ç§€**

- æ‰€æœ‰æµ‹è¯•ç›¸å…³æ’ä»¶å’Œä¾èµ–ç‰ˆæœ¬å…¼å®¹
- å·²ä¿®å¤é‡å¤ä¾èµ–é—®é¢˜
- Surefireå’ŒJaCoCoé›†æˆæ­£ç¡®
- é…ç½®ç¬¦åˆæœ€ä½³å®è·µ

**å»ºè®®**: å¯ä»¥è€ƒè™‘ç§»é™¤JUnit 4ä¾èµ–ï¼ˆå¦‚æœä¸éœ€è¦ï¼‰ï¼Œè¿›ä¸€æ­¥ç®€åŒ–é…ç½®ã€‚

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Spring Boot 2.4.1 æµ‹è¯•æ–‡æ¡£](https://docs.spring.io/spring-boot/docs/2.4.1/reference/html/spring-boot-features.html#boot-features-testing)
- [Maven Surefire Plugin æ–‡æ¡£](https://maven.apache.org/surefire/maven-surefire-plugin/)
- [JaCoCo Maven Plugin æ–‡æ¡£](https://www.jacoco.org/jacoco/trunk/doc/maven.html)
- [JUnit 5 æ–‡æ¡£](https://junit.org/junit5/docs/current/user-guide/)

